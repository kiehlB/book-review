(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[322],{66099:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/search/[id]",function(){return e(16194)}])},96835:function(n,t,e){"use strict";e.d(t,{Z:function(){return s}});var i=e(67294),o=e(60119);function s(n){let{cursor:t,stop:e,offset:s,onLoadMore:r,onLoadMoreByOffset:u}=n,a=(0,i.useRef)(null),l=(0,i.useCallback)(()=>{0===(0,o.rA)()&&window.scrollTo(0,(0,o.cx)()-1)},[]),d=(0,i.useCallback)(async()=>{t&&r&&t!==a.current&&(a.current=t,await r(t),l())},[t,r,l]),c=(0,i.useCallback)(async()=>{!e&&s&&u&&s!==a.current&&(a.current=s,await u(s),l())},[s,u,l,e]),b=(0,i.useCallback)(()=>{let n=(0,o.rA)();n<window.screen.height&&(d(),c())},[d,c]);(0,i.useEffect)(()=>(window.addEventListener("scroll",b),()=>{window.removeEventListener("scroll",b)}),[b])}},17426:function(n,t,e){"use strict";e.d(t,{E4:function(){return h},Hz:function(){return f},KH:function(){return Z},QU:function(){return x},WO:function(){return y},YR:function(){return P},Zr:function(){return g},hc:function(){return S},l5:function(){return $},ss:function(){return w},wL:function(){return I},zL:function(){return v}});var i=e(7297),o=e(58585);function s(){let n=(0,i.Z)(["\n  query GetPost($id: String!) {\n    post(id: $id) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      subs_count\n      released_at\n      created_at\n      updated_at\n      liked\n      tags {\n        tag {\n          name\n        }\n      }\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n        profile {\n          id\n          bio\n          profile_name\n          thumbnail\n        }\n      }\n      subs {\n        id\n        text\n        likes\n        has_replies\n        deleted\n        level\n        reply\n        created_at\n        updated_at\n\n        upvotes\n        replies {\n          id\n          text\n          has_replies\n          created_at\n          updated_at\n        }\n        replies_count\n        user {\n          id\n          username\n          profile {\n            id\n            bio\n            profile_name\n            thumbnail\n          }\n        }\n      }\n    }\n  }\n"]);return s=function(){return n},n}function r(){let n=(0,i.Z)(["\n  query GetPosts($cursor: String, $username: String, $istemp: Boolean) {\n    posts(cursor: $cursor, username: $username, istemp: $istemp) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      tags {\n        tag {\n          name\n        }\n      }\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return r=function(){return n},n}function u(){let n=(0,i.Z)(["\n  query RecentPosts($cursor: String, $limit: Int) {\n    recentPosts(cursor: $cursor, limit: $limit) {\n      id\n      title\n\n      thumbnail\n      likes\n      views\n      is_temp\n      postbody\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return u=function(){return n},n}function a(){let n=(0,i.Z)(["\n  query TrendingPosts(\n    $offset: Int\n    $limit: Int\n    $timeframe: String\n    $from: Date\n    $to: Date\n  ) {\n    trendingPosts(\n      offset: $offset\n      limit: $limit\n      timeframe: $timeframe\n      from: $from\n      to: $to\n    ) {\n      id\n      title\n      thumbnail\n      likes\n      postbody\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return a=function(){return n},n}function l(){let n=(0,i.Z)(["\n  mutation CreatePost(\n    $body: String!\n    $title: String!\n    $thumbnail: String\n    $postbody: String\n    $tags: [String]\n    $is_temp: Boolean\n    $is_private: Boolean\n    $bookTitle: String\n    $bookContent: String\n    $bookUrl: String\n    $bookIsbn: String\n    $bookAuthors: [String]\n  ) {\n    createPost(\n      body: $body\n      title: $title\n      tags: $tags\n      thumbnail: $thumbnail\n      postbody: $postbody\n      is_temp: $is_temp\n      is_private: $is_private\n      bookTitle: $bookTitle\n      bookContent: $bookContent\n      bookUrl: $bookUrl\n      bookIsbn: $bookIsbn\n      bookAuthors: $bookAuthors\n    ) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      postbody\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n    }\n  }\n"]);return l=function(){return n},n}function d(){let n=(0,i.Z)(["\n  query ReloadComments($id: String!) {\n    post(id: $id) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      subs_count\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n        updated_at\n      }\n    }\n  }\n"]);return d=function(){return n},n}function c(){let n=(0,i.Z)(["\n  query SearchPosts($searchInput: String) {\n    searchPosts(searchInput: $searchInput) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return c=function(){return n},n}function b(){let n=(0,i.Z)(["\n  mutation EditPost(\n    $id: String!\n    $title: String\n    $body: String\n    $thumbnail: String\n    $tags: [String]\n    $is_temp: Boolean\n    $is_private: Boolean\n    $postbody: String\n  ) {\n    editPost(\n      id: $id\n      title: $title\n      body: $body\n      tags: $tags\n      is_temp: $is_temp\n      thumbnail: $thumbnail\n      is_private: $is_private\n      postbody: $postbody\n    ) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return b=function(){return n},n}function m(){let n=(0,i.Z)(["\n  mutation RemovePost($id: String!) {\n    removePost(id: $id)\n  }\n"]);return m=function(){return n},n}function p(){let n=(0,i.Z)(["\n  mutation LikePost($id: String!) {\n    likePost(id: $id) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return p=function(){return n},n}function k(){let n=(0,i.Z)(["\n  mutation UnlikePost($id: String!) {\n    unlikePost(id: $id) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return k=function(){return n},n}function _(){let n=(0,i.Z)(["\n  mutation UploadImageToCloudinary($body: String!, $width: Int!, $height: Int!) {\n    uploadImage(body: $body, width: $width, height: $height) {\n      public_id\n      url\n    }\n  }\n"]);return _=function(){return n},n}let f=(0,o.ZP)(s()),h=(0,o.ZP)(r()),$=(0,o.ZP)(u()),g=(0,o.ZP)(a()),v=(0,o.ZP)(l()),y=(0,o.ZP)(d()),w=(0,o.ZP)(c()),x=(0,o.ZP)(b()),P=(0,o.ZP)(m()),I=(0,o.ZP)(p()),S=(0,o.ZP)(k()),Z=(0,o.ZP)(_())},16194:function(n,t,e){"use strict";e.r(t),e.d(t,{default:function(){return v}});var i=e(85893),o=e(2962),s=e(67294),r=e(79352),u=e(14490),a=e(70318),l=e(86548),d=e(47034),c=e(46829),b=e(96835),m=e(17426),p=e(3410),k=e(12045),_=e(8234),f=e(79347),h=e(11163),$=e(8193),g=e(63750);function v(){let n=(0,h.useRouter)(),{id:t}=n.query,{data:e,loading:v}=function(n){var t;let{data:e,loading:i,fetchMore:o}=(0,c.useQuery)(m.ss,{variables:{limit:24,searchInput:n},notifyOnNetworkStatusChange:!0}),[r,u]=(0,s.useState)(!1),a=(0,s.useCallback)(n=>{o({variables:{cursor:n,limit:24},updateQuery:(n,t)=>{let{fetchMoreResult:e}=t;return e?(0===e.searchPosts.length&&u(!0),{searchPosts:[...n.searchPosts,...e.searchPosts]}):n}})},[o]),l=null===(t=null==e?void 0:e.searchPosts[(null==e?void 0:e.searchPosts.length)-1])||void 0===t?void 0:t.id;return(0,b.Z)({cursor:l,onLoadMore:a}),{data:e,loading:i,isFinished:r}}(t);return(0,i.jsxs)(_.E.div,{children:[(0,i.jsx)(o.PB,{...(0,k.q)({title:"Search page",description:"검색 페이지"})}),(0,i.jsx)(o.iu,{url:"https://www.bookreview.pro/search?q",potentialActions:[{target:"https://www.bookreview.pro/search?q",queryInput:"search_term_string"}]}),(0,i.jsx)(l.X,{children:(0,i.jsxs)(a.k,{as:"div",className:"pt-[2.25rem]",children:[(0,i.jsx)(u.$t,{className:"col-span-2 mmd:hidden",children:(0,i.jsx)(d.Z,{primaryItems:[{icon:(0,i.jsx)(r.iEv,{}),text:"포스트",to:"/",sub:["/search","/search/[query]","/trending"]},{icon:(0,i.jsx)($.pMA,{}),text:"게시판",to:"/post"},{icon:(0,i.jsx)(g.ra4,{}),text:"태그",to:"/tags"}],secondaryItems:[{icon:(0,i.jsx)(r.UeR,{}),text:"Trending tags",to:"/Trending tags"}]})}),(0,i.jsx)(u.LN,{className:"col-span-8 mmd:col-span-12",first:(0,i.jsx)(u.s2,{children:(0,i.jsx)("div",{className:"flex justify-between items-center  pt-4 pb-0",children:(0,i.jsx)(f.hb,{href:"/",children:(0,i.jsx)("div",{className:"w-[240px] text-[#334155] text-base flex items-center justify-between font-semibold pl-2 dark:text-[#D3D3D3]",children:"메인으로"})})})}),second:(0,i.jsx)(u.so,{children:(0,i.jsx)(a.Y,{className:"mt-[1rem]",children:(0,i.jsx)(p.Z,{posts:(null==e?void 0:e.searchPosts)||[],loading:!e||v})})})})]})})]})}}},function(n){n.O(0,[228,260,617,937,662,401,86,13,78,780,424,548,543,774,888,179],function(){return n(n.s=66099)}),_N_E=n.O()}]);