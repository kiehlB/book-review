(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{5776:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/write",function(){return t(59206)}])},70318:function(e,n,t){"use strict";t.d(n,{Y:function(){return l},k:function(){return s}});var i=t(85893),r=t(67294),o=t(86010);function s(e){let{children:n,className:t,as:r="div"}=e;return(0,i.jsx)(r,{className:(0,o.Z)("grid grid-cols-10 gap-6 max-w-[98.5rem] mx-auto mxl:max-w-[75rem] mmd:grid-cols-10",t),children:n})}let l=r.forwardRef(function(e,n){let{children:t,className:r}=e;return(0,i.jsx)("div",{className:(0,o.Z)("grid grid-cols-8 gap-x-6 gap-y-12  max-w-[78.5rem] mx-auto w-full mxl:grid-cols-12 auto-rows-fr",r),children:t})})},17426:function(e,n,t){"use strict";t.d(n,{E4:function(){return v},Hz:function(){return f},KH:function(){return S},QU:function(){return C},WO:function(){return j},YR:function(){return Z},Zr:function(){return k},hc:function(){return _},l5:function(){return g},ss:function(){return w},wL:function(){return N},zL:function(){return y}});var i=t(7297),r=t(58585);function o(){let e=(0,i.Z)(["\n  query GetPost($id: String!) {\n    post(id: $id) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      subs_count\n      released_at\n      created_at\n      updated_at\n      liked\n      tags {\n        tag {\n          name\n        }\n      }\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n        profile {\n          id\n          bio\n          profile_name\n          thumbnail\n        }\n      }\n      subs {\n        id\n        text\n        likes\n        has_replies\n        deleted\n        level\n        reply\n        created_at\n        updated_at\n\n        upvotes\n        replies {\n          id\n          text\n          has_replies\n          created_at\n          updated_at\n        }\n        replies_count\n        user {\n          id\n          username\n          profile {\n            id\n            bio\n            profile_name\n            thumbnail\n          }\n        }\n      }\n    }\n  }\n"]);return o=function(){return e},e}function s(){let e=(0,i.Z)(["\n  query GetPosts($cursor: String, $username: String, $istemp: Boolean) {\n    posts(cursor: $cursor, username: $username, istemp: $istemp) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      tags {\n        tag {\n          name\n        }\n      }\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return s=function(){return e},e}function l(){let e=(0,i.Z)(["\n  query RecentPosts($cursor: String, $limit: Int) {\n    recentPosts(cursor: $cursor, limit: $limit) {\n      id\n      title\n\n      thumbnail\n      likes\n      views\n      is_temp\n      postbody\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return l=function(){return e},e}function a(){let e=(0,i.Z)(["\n  query TrendingPosts(\n    $offset: Int\n    $limit: Int\n    $timeframe: String\n    $from: Date\n    $to: Date\n  ) {\n    trendingPosts(\n      offset: $offset\n      limit: $limit\n      timeframe: $timeframe\n      from: $from\n      to: $to\n    ) {\n      id\n      title\n      thumbnail\n      likes\n      postbody\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return a=function(){return e},e}function c(){let e=(0,i.Z)(["\n  mutation CreatePost(\n    $body: String!\n    $title: String!\n    $thumbnail: String\n    $postbody: String\n    $tags: [String]\n    $is_temp: Boolean\n    $is_private: Boolean\n    $bookTitle: String\n    $bookContent: String\n    $bookUrl: String\n    $bookIsbn: String\n    $bookAuthors: [String]\n  ) {\n    createPost(\n      body: $body\n      title: $title\n      tags: $tags\n      thumbnail: $thumbnail\n      postbody: $postbody\n      is_temp: $is_temp\n      is_private: $is_private\n      bookTitle: $bookTitle\n      bookContent: $bookContent\n      bookUrl: $bookUrl\n      bookIsbn: $bookIsbn\n      bookAuthors: $bookAuthors\n    ) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      postbody\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n    }\n  }\n"]);return c=function(){return e},e}function d(){let e=(0,i.Z)(["\n  query ReloadComments($id: String!) {\n    post(id: $id) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      subs_count\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n        updated_at\n      }\n    }\n  }\n"]);return d=function(){return e},e}function u(){let e=(0,i.Z)(["\n  query SearchPosts($searchInput: String) {\n    searchPosts(searchInput: $searchInput) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      bookInfo {\n        bookTitle\n        bookContent\n        bookUrl\n        bookIsbn\n        bookAuthors\n      }\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return u=function(){return e},e}function m(){let e=(0,i.Z)(["\n  mutation EditPost(\n    $id: String!\n    $title: String\n    $body: String\n    $thumbnail: String\n    $tags: [String]\n    $is_temp: Boolean\n    $is_private: Boolean\n    $postbody: String\n  ) {\n    editPost(\n      id: $id\n      title: $title\n      body: $body\n      tags: $tags\n      is_temp: $is_temp\n      thumbnail: $thumbnail\n      is_private: $is_private\n      postbody: $postbody\n    ) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return m=function(){return e},e}function p(){let e=(0,i.Z)(["\n  mutation RemovePost($id: String!) {\n    removePost(id: $id)\n  }\n"]);return p=function(){return e},e}function h(){let e=(0,i.Z)(["\n  mutation LikePost($id: String!) {\n    likePost(id: $id) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return h=function(){return e},e}function x(){let e=(0,i.Z)(["\n  mutation UnlikePost($id: String!) {\n    unlikePost(id: $id) {\n      id\n      title\n      body\n      thumbnail\n      likes\n      views\n      is_temp\n      is_private\n      released_at\n      created_at\n      updated_at\n      liked\n      user {\n        id\n        username\n      }\n      subs {\n        id\n        text\n      }\n      subs_count\n    }\n  }\n"]);return x=function(){return e},e}function b(){let e=(0,i.Z)(["\n  mutation UploadImageToCloudinary($body: String!, $width: Int!, $height: Int!) {\n    uploadImage(body: $body, width: $width, height: $height) {\n      public_id\n      url\n    }\n  }\n"]);return b=function(){return e},e}let f=(0,r.ZP)(o()),v=(0,r.ZP)(s()),g=(0,r.ZP)(l()),k=(0,r.ZP)(a()),y=(0,r.ZP)(c()),j=(0,r.ZP)(d()),w=(0,r.ZP)(u()),C=(0,r.ZP)(m()),Z=(0,r.ZP)(p()),N=(0,r.ZP)(h()),_=(0,r.ZP)(x()),S=(0,r.ZP)(b())},27280:function(e,n,t){"use strict";let i=e=>"@media (max-width: ".concat(e,"px)"),r=e=>"@media (min-width: ".concat(e,"px)"),o={custom:i,minCustom:r,desktop:i(922),tablet:i(768),phone:i(576)};n.ZP=o},59206:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return nS}});var i=t(85893),r=t(2962),o=t(67294),s=t(65820),l=t(8234),a=t(86010),c=t(9473),d=t(53854),u=t(14490),m=t(28087);function p(e){let{children:n,variant:t,size:r="large"}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:(0,a.Z)("focus-ring absolute inset-0 transform rounded-full opacity-100 transition disabled:opacity-50",{"border-secondary bg-primary border-2 group-hover:border-transparent group-focus:border-transparent":"secondary"===t||"danger"===t,danger:"danger"===t,"bg-inverse":"primary"===t})}),(0,i.jsx)("div",{className:(0,a.Z)("relative flex h-full w-full items-center justify-center whitespace-nowrap",{"text-primary":"secondary"===t,"text-inverse":"primary"===t,"text-red-500":"danger"===t,"space-x-5 px-11 py-6":"large"===r,"space-x-3 px-5 py-2 font-semibold":"medium"===r,"space-x-1 px-5 py-2 text-sm":"small"===r}),children:n})]})}function h(e){let{children:n,variant:t="primary",size:r="large",className:o,...s}=e;return(0,i.jsx)("button",{...s,className:function(e){let{className:n}=e;return(0,a.Z)("group relative inline-flex text-lg font-medium focus:outline-none opacity-100 disabled:opacity-50 transition",n)}({className:o}),children:(0,i.jsx)(p,{variant:t,size:r,children:n})})}var x=t(46829),b=t(11163),f=t(17426),v=t(55678),g=t(60119),k=o.memo(function(e){let{fileInputState:n,isPrivate:t,book:r}=e,o=(0,c.v9)(e=>e.book.body),s=(0,c.v9)(e=>e.book.tags),l=(0,c.v9)(e=>e.book.postId),a=(0,c.v9)(e=>e.book.title),d=(0,c.v9)(e=>e.book.thumbnail),{handleSubmit:u}=function(){let e=(0,b.useRouter)(),n=(0,c.I0)(),[t]=(0,x.useMutation)(f.QU,{onCompleted(t){let{}=t;n((0,m.aQ)()),n((0,m.vz)("")),n((0,m.aq)("")),n((0,m.mg)([])),n((0,m.n8)("")),n((0,m.sX)("")),n((0,m.SX)(null)),e.push("/")}}),[i]=(0,x.useMutation)(f.zL,{onCompleted(t){let{}=t;n((0,m.aQ)()),n((0,m.SX)(null)),n((0,m.vz)("")),n((0,m.aq)("")),n((0,m.mg)([])),n((0,m.n8)("")),n((0,m.sX)("")),e.push("/")}}),r=(0,x.useApolloClient)(),o=async(e,n,o,s,l,a,c,d,u)=>{var m;e.preventDefault();let p=null===(m=null==s?void 0:s.replace(/<[^>]+>/g," "))||void 0===m?void 0:m.slice(0,400);if((0,g.TM)(o)){v.Am.error("제목 또는 내용이 비어있습니다.",{position:"bottom-right"});return}if(n){console.log(p);try{await t({variables:{id:n,title:o,body:s,tags:l,is_temp:!1,thumbnail:a||u,is_private:c,postbody:p}}),await r.resetStore()}catch(e){v.Am.error("포스트 저장 실패",{position:"bottom-right"})}}else if(!n)try{i({variables:{title:o,body:s,tags:l,is_temp:!1,thumbnail:a||u,is_private:c,postbody:p,bookTitle:null==d?void 0:d.title,bookContent:null==d?void 0:d.contents,bookUrl:null==d?void 0:d.thumbnail,bookIsbn:null==d?void 0:d.isbn,bookAuthors:null==d?void 0:d.authors}}),await r.resetStore()}catch(e){v.Am.error("포스트 저장 실패",{position:"bottom-right"})}};return{handleSubmit:o}}(),p=(0,c.I0)();return(0,i.jsxs)("div",{className:"flex justify-end ",children:[(0,i.jsx)(h,{size:"medium",className:"font-bold text-[#191919]",onClick:()=>p((0,m.aQ)()),children:"취소"}),(0,i.jsx)(h,{size:"medium",className:"text-[#191919] font-bold border bg-[#FCd545] rounded border-[#FCd545]  shadow-sm",onClick:e=>{u(e,l,a,o,s,n,t,r,d)},children:"작성 완료"})]})}),y=t(7297),j=t(40221),w=t(186),C=t(51383);function Z(){let e=(0,y.Z)(["\n  font-size: 1rem;\n  font-weight: bold;\n  color: rgb(134, 142, 150);\n  cursor: pointer;\n"]);return Z=function(){return e},e}class N extends o.PureComponent{componentDidMount(){document.addEventListener("click",this.closePopover)}componentWillUnmount(){document.removeEventListener("click",this.closePopover)}handleChange(e){return n=>{this.setState({[e]:n.currentTarget.value})}}onProgress(e,n){let t=n?"webWorker":"mainThread";this.setState(n=>({...n,[t]:{...n[t],progress:e}}))}async compressImage(e,n){let t=e.target.files[0],i=n?"webWorker":"mainThread";this.setState(e=>({...e,[i]:{...e[i],inputSize:(t.size/1024/1024).toFixed(2),inputUrl:URL.createObjectURL(t)}}));let r=await (0,j.Z)(t,{maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:n,onProgress:e=>this.onProgress(e,n)}),o=new FileReader;o.readAsDataURL(r),o.onloadend=async()=>{let{addImage:e,setreadyForFile:n,readyForFile:t}=this.props;this.props.setPreviewSource(1),e(o.result),o.result&&n(o.result)},this.setState(e=>({...e,[i]:{...e[i],outputSize:(r.size/1024/1024).toFixed(2),outputUrl:URL.createObjectURL(r)}}))}render(){let{webWorker:e,mainThread:n,maxSizeMB:t,maxWidthOrHeight:r}=this.state;return(0,i.jsxs)("div",{className:"cursor-pointer",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsx)("div",{className:"text-[1.3rem] text-[#212529] font-semibold mb-1",children:"썸네일 등록"}),(0,i.jsx)("div",{className:"flex",children:this.props.readyForFile&&2==this.props.previewSource?(0,i.jsx)(i.Fragment,{children:(0,i.jsx)("div",{onClick:()=>this.cleardata(),className:"text-base text-[#212529] cursor-pointer",children:"취소"})}):""})]}),(0,i.jsx)("div",{className:"w-full pt-[55.11%] relative",children:(0,i.jsx)("div",{className:"w-full h-full absolute left-0 top-0 shadow",children:1==this.props.previewSource?(0,i.jsx)("div",{className:"w-full h-full flex justify-center items-center",children:(0,i.jsx)(C.Z,{size:48})}):this.props.readyForFile&&2==this.props.previewSource?(0,i.jsx)("img",{src:this.props.readyForFile,className:"w-full h-full flex items-center flex-col justify-center object-cover"}):(0,i.jsx)("label",{htmlFor:"input-file",children:(0,i.jsxs)("div",{className:"w-full h-full flex items-center flex-col bg-[#E9ECEF] justify-center",children:[(0,i.jsxs)("svg",{width:"107",height:"85",fill:"none",viewBox:"0 0 107 85",children:[(0,i.jsx)("path",{fill:"#868E96",d:"M105.155 0H1.845A1.844 1.844 0 0 0 0 1.845v81.172c0 1.02.826 1.845 1.845 1.845h103.31A1.844 1.844 0 0 0 107 83.017V1.845C107 .825 106.174 0 105.155 0zm-1.845 81.172H3.69V3.69h99.62v77.482z"}),(0,i.jsx)("path",{fill:"#868E96",d:"M29.517 40.84c5.666 0 10.274-4.608 10.274-10.271 0-5.668-4.608-10.276-10.274-10.276-5.665 0-10.274 4.608-10.274 10.274 0 5.665 4.609 10.274 10.274 10.274zm0-16.857a6.593 6.593 0 0 1 6.584 6.584 6.593 6.593 0 0 1-6.584 6.584 6.591 6.591 0 0 1-6.584-6.582c0-3.629 2.954-6.586 6.584-6.586zM12.914 73.793a1.84 1.84 0 0 0 1.217-.46l30.095-26.495 19.005 19.004a1.843 1.843 0 0 0 2.609 0 1.843 1.843 0 0 0 0-2.609l-8.868-8.868 16.937-18.548 20.775 19.044a1.846 1.846 0 0 0 2.492-2.72L75.038 31.846a1.902 1.902 0 0 0-1.328-.483c-.489.022-.95.238-1.28.6L54.36 51.752l-8.75-8.75a1.847 1.847 0 0 0-2.523-.081l-31.394 27.64a1.845 1.845 0 0 0 1.22 3.231z"})]}),(0,i.jsx)("input",{id:"input-file",type:"file",name:"file",onChange:e=>this.compressImage(e,!0),style:{display:"none"}}),(0,i.jsx)("div",{className:"mt-2 text-sm px-[32px] py-[6px] rounded-3xl bg-[#Fff] text-[#181A20] cursor-pointer hover:text-[#5b646d] font-semibold ",children:"업로드"})]})})})})]})}constructor(e){super(e),this.onPopoverClick=()=>{this.preventNextClose=!0},this.openPopover=()=>{this.state.open||(this.preventNextClose=!0,this.setState({open:!0}))},this.cleardata=()=>{this.props.setPreviewSource(0),this.setState({webWorker:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null}})},this.closePopover=()=>{!this.preventNextClose&&this.state.open&&this.setState({open:!1}),this.preventNextClose=!1},this.compressImage=this.compressImage.bind(this),this.handleChange=this.handleChange.bind(this),this.state={open:!1,previewSource:"",maxSizeMB:1,maxWidthOrHeight:1024,webWorker:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null},mainThread:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null}}}}w.ZP.div(Z());let _={open:{y:0,opacity:1,transition:{x:{stiffness:1500,velocity:-100}}},closed:{y:2160,opacity:0,transition:{x:{stiffness:1e3}}}};var S=o.memo(function(e){let{}=e,n=(0,c.v9)(e=>null==e?void 0:e.book.isopen),t=(0,c.v9)(e=>null==e?void 0:e.book.thumbnail),[r,m]=(0,o.useState)(""),[p,h]=(0,o.useState)(0),[b,v]=(0,o.useState)(),[g,y]=(0,o.useState)(!1),j=(0,c.v9)(e=>null==e?void 0:e.book.book),[w,C]=(0,o.useState)(""),[Z]=(0,x.useMutation)(f.KH);(0,o.useEffect)(()=>{t&&(m(t),h(2))},[]);let S=(0,o.useCallback)(async e=>{await Z({variables:{body:e,width:733,height:455},update:(e,n)=>{let{data:t}=n;C(t.uploadImage.url),h(2)}}),e&&v(e)},[]),P=(0,o.useCallback)(()=>{y(!0)},[g]),F=(0,o.useCallback)(()=>{y(!1)},[g]);return(0,i.jsx)(s.M,{mode:"wait",initial:!1,children:(0,i.jsx)(l.E.div,{className:(0,a.Z)("fixed flex justify-center items-center left-0 top-0 w-full h-full bg-[#F8F9FA] z-[500]"),initial:{display:"none"},animate:n?"open":"closed",variants:_,children:(0,i.jsx)(u.LN,{className:"w-[768px] flex px-4 mxs:flex-col mxs:overflow-auto mxs:h-[100%] mxs:py-8",first:(0,i.jsx)(u.s2,{children:(0,i.jsxs)("div",{className:"flex-1 min-w-[0]",children:[(0,i.jsx)(N,{addImage:S,readyForFile:r,setPreviewSource:h,uploadThumbnail:Z,previewSource:p,setreadyForFile:m,thumbnail:t}),(0,i.jsx)("div",{className:"text-[1.3rem] text-[#212529] font-semibold mt-4 mxs:py-2",children:"등록될 책"}),(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-[1rem] text-[#212529] font-semibold py-2",children:["책: ",(null==j?void 0:j.title)?null==j?void 0:j.title:"선택된 책이 없습니다"]}),(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:null==j?void 0:j.thumbnail})})]})]})}),second:(0,i.jsx)(u.so,{children:(0,i.jsx)("div",{className:"w-[1px] min-h-[425px] bg-[#757575] mx-[2rem] mxs:hidden"})}),third:(0,i.jsx)(u.Nu,{children:(0,i.jsxs)("div",{className:"flex flex-col justify-between flex-1 min-w-[0] mxs:mt-6 mxs:block ",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)("div",{className:"w-full text-[1.3rem] text-[#212529] font-semibold mb-2",children:"공개 설정"}),(0,i.jsxs)("div",{className:"outline-none flex",children:[(0,i.jsxs)("div",{onClick:F,className:(0,a.Z)("w-full flex-1 h-[3rem] outline-none border inline-flex justify-start font-bold items-center p-0 rounded shadow-sm pl-[1rem]",{"border-[#FCd545] text-[#191919] bg-[#FCd545] border":!1==g,"bg-[#fff]":!0==g}),children:[(0,i.jsx)(d.exi,{size:24}),(0,i.jsx)("div",{className:"flex-1 flex justify-center items-center",children:"전체 공개"})]}),(0,i.jsxs)("div",{onClick:P,className:(0,a.Z)("w-full outline-none flex-1 h-[3rem] border inline-flex justify-start font-bold ml-[1rem] items-center p-0 rounded shadow-sm pl-[1rem]",{"border-[#FCd545] text-[#191919] border bg-[#FCd545]":!0==g,"bg-[#fff]":!1==g}),children:[(0,i.jsx)(d.eW7,{size:24}),(0,i.jsx)("div",{className:"flex-1 flex justify-center items-center",children:"비공개"})]})]})]}),(0,i.jsx)("div",{className:"mxs:mt-8",children:(0,i.jsx)(k,{fileInputState:w,isPrivate:g,book:j})})]})})})})})}),P=t(79347),F=t(70318);function $(){let e=(0,y.Z)(["\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 1;\n  }\n"]);return $=function(){return e},e}function I(){let e=(0,y.Z)(["\n  0% {\n    opacity: 1;\n  }\n  100% {\n    opacity: 0;\n  }\n"]);return I=function(){return e},e}function z(){let e=(0,y.Z)(["\n  0% {\n    opacity: 0;\n    transform: translateY(400px) scale(0.75);\n  }\n  75% {\n    opacity: 1;\n    transform: translateY(-16px) scale(1.0);\n  }\n  100% {\n    opacity: 1;\n    transform: translateY(0px);\n  }"]);return z=function(){return e},e}function A(){let e=(0,y.Z)(["\n  0% {\n    opacity: 1;\n    transform: translateY(0px) scale(1.0);\n  }\n  100% {\n    opacity: 0;\n    transform: translateY(400px) scale(0.75);\n  }"]);return A=function(){return e},e}function T(){let e=(0,y.Z)(["\n  0% {\n    opacity: 0.7;\n    transform: scale3d(0.8, 0.8, 1);\n  }\n  100% {\n    opacity: 1;\n    transform: scale3d(1, 1, 1);\n  }\n"]);return T=function(){return e},e}function M(){let e=(0,y.Z)(["\n  0% {\n    transform: translateY(100%);\n  }\n  100% {\n    transform: translateY(0%);\n  };\n"]);return M=function(){return e},e}function U(){let e=(0,y.Z)(["\n  0% {\n    transform: translateY(0%);\n  }\n  100% {\n    transform: translateY(100%);\n  };\n"]);return U=function(){return e},e}let L=(0,w.F4)($()),H=(0,w.F4)(I()),R=(0,w.F4)(z()),E=(0,w.F4)(A()),D=(0,w.F4)(T()),B=(0,w.F4)(M()),O=(0,w.F4)(U());var W=t(54624);function q(){let e=(0,y.Z)(["\n  color: #121212;\n  font-size: 1rem;\n  display: inline-flex;\n  align-items: center;\n  height: 2rem;\n  border-radius: 1rem;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  background: #fcd545;\n  margin-right: 0.75rem;\n  transition: ease-in 0.125s;\n  cursor: pointer;\n  text: #212529;\n  &:hover {\n    opacity: 0.6;\n  }\n  margin-bottom: 0.75rem;\n  animation: "," 0.125s forwards ease-in-out;\n"]);return q=function(){return e},e}let Q=w.ZP.div(q(),{fadeIn:L,fadeOut:H,popInFromBottom:R,popOutToBottom:E,popIn:D,slideUp:B,slideDown:O}.popIn),Y=e=>{let{onClick:n,children:t,posts:r}=e;return(0,i.jsx)(Q,{onClick:n,children:t})};var V=o.memo(function(e){var n;let t=(0,c.v9)(e=>e.book.isopen),r=(0,c.v9)(e=>e.book.postSave),s=null===(n=e.posts)||void 0===n?void 0:n.filter(n=>n.id==e.postId),[l,a]=(0,o.useState)(""),[d,u]=(0,o.useState)([]),p=(0,o.useRef)(!1),[h,x]=(0,o.useState)(!1),b=(0,c.I0)();(0,o.useEffect)(()=>{b((0,m.mg)(d))},[t,r]),(0,o.useEffect)(()=>{e.StoreTag.length>=1&&u([...e.StoreTag])},[e.postId]),(0,o.useEffect)(()=>{if((null==s?void 0:s.length)>=1){var e,n;u([...null===(e=s[0])||void 0===e?void 0:null===(n=e.tags)||void 0===n?void 0:n.map(e=>{var n;return null==e?void 0:null===(n=e.tag)||void 0===n?void 0:n.name})])}},[e.postId]);let f=e=>{a(e.target.value)},v=(0,o.useCallback)(e=>{if(p.current=!0,a(""),""===e||d.includes(e))return;let n=e;if((n=e.trim()).indexOf(" #")>0){let e=[],t=/#(\S+)/g,i=null;for(;i=t.exec(n);)null!==i&&e.push(i[1]);u([...d,...e]);return}"#"===n.charAt(0)&&(n=n.slice(1,n.length)),u([...d,n])},[d]),g=(0,o.useCallback)(e=>{if("Backspace"===e.key&&""===l){u(d.slice(0,d.length-1));return}["Enter"].includes(e.key)&&(e.preventDefault(),v(l))},[v,d,l]),k=e=>{let n=d.filter(n=>n!==e);u(n)};return(0,i.jsxs)("div",{children:[d.map(e=>(0,i.jsx)(Y,{onClick:()=>k(e),children:e},e)),(0,i.jsx)(W.Z,{content:"엔터키로 등록, 태그를 클릭하면 삭제 됩니다",children:(0,i.jsx)("input",{placeholder:"태그를 입력하세요",tabIndex:2,onKeyDown:g,onChange:f,className:"dark:bg-[#1a1b1e] dark:text-[#D3D3D3] dark:placeholder-[#D3D3D3] outline-none",value:l,onFocus:()=>x(!0),onBlur:()=>x(!1)})})]})}),X=t(24697);function G(){let{auth:e}=(0,c.v9)(e=>e.auth),[n]=(0,x.useMutation)(f.zL,{}),[t]=(0,x.useMutation)(f.YR),[i]=(0,x.useMutation)(f.QU,{}),r=(0,x.useApolloClient)(),o=(0,c.I0)(),{data:s,loading:l,fetchMore:a,refetch:d}=(0,x.useQuery)(f.E4,{variables:{username:null==e?void 0:e.username,istemp:!0},skip:!e}),u=null==s?void 0:s.posts,p=async(t,r,s,l,a)=>{if(!r){v.Am.error("제목 또는 내용이 비어있습니다.",{position:"bottom-right"});return}if(t){if(t&&(null==u?void 0:u.length)!==0)try{await i({variables:{id:t,title:r,body:s,tags:l,is_temp:!0,bookTitle:null==a?void 0:a.title,bookContent:null==a?void 0:a.contents,bookUrl:null==a?void 0:a.thumbnail,bookIsbn:null==a?void 0:a.isbn,bookAuthors:null==a?void 0:a.authors},update:async(e,n)=>{let{data:t}=n;await d()}}),v.Am.success("포스트 저장 성공",{position:"bottom-right"})}catch(e){v.Am.error("포스트 저장 실패",{position:"bottom-right"})}else if(t&&(null==u?void 0:u.length)==0)try{await n({variables:{id:t,title:r,body:s,tags:l,is_temp:!0,bookTitle:null==a?void 0:a.title,bookContent:null==a?void 0:a.contents,bookUrl:null==a?void 0:a.thumbnail,bookIsbn:null==a?void 0:a.isbn,bookAuthors:null==a?void 0:a.authors},update:async(n,t)=>{let{data:i}=t;o((0,m.n8)(null==i?void 0:i.createPost.id)),null==n||n.writeQuery({query:f.E4,variables:{username:null==e?void 0:e.username,istemp:!0},data:{posts:[null==i?void 0:i.createPost,...u]}})}}),v.Am.success("포스트 저장 성공",{position:"bottom-right"})}catch(e){v.Am.error("포스트 저장 실패",{position:"bottom-right"})}}else try{await n({variables:{id:t,title:r,body:s,tags:l,is_temp:!0,bookTitle:null==a?void 0:a.title,bookContent:null==a?void 0:a.contents,bookUrl:null==a?void 0:a.thumbnail,bookIsbn:null==a?void 0:a.isbn,bookAuthors:null==a?void 0:a.authors},update:async(n,t)=>{let{data:i}=t;o((0,m.n8)(null==i?void 0:i.createPost.id)),null==n||n.writeQuery({query:f.E4,variables:{username:null==e?void 0:e.username,istemp:!0},data:{posts:[null==i?void 0:i.createPost,...u]}})}}),v.Am.success("포스트 저장 성공",{position:"bottom-right"})}catch(e){v.Am.error("포스트 저장 실패",{position:"bottom-right"})}},h=async n=>{if(n)try{await t({variables:{id:n}}),r.writeQuery({query:f.E4,variables:{username:null==e?void 0:e.username,istemp:!0},data:{posts:s.posts.filter(e=>e.id!==n)}}),v.Am.success("포스트가 삭제되었습니다.",{position:"bottom-right"})}catch(e){v.Am.error("포스트 삭제 실패",{position:"bottom-right"})}},b=(0,X.y1)(p,200);return{onConfirmRemove:h,onConfirmSave:b,posts:u,loading:l}}var K=t(17158),J=t(17106),ee=t(24819);function en(e){let{children:n}=e;return(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)(K.v,{as:"div",className:"relative inline-block text-left",children:[(0,i.jsx)("div",{className:"flex items-center",children:(0,i.jsxs)(K.v.Button,{className:"flex items-center",children:[(0,i.jsx)("div",{className:"max-w-full w-10 font-Roboto",children:"Menu"}),(0,i.jsx)(ee,{className:"ml-1 mr-1 h-5 w-5 text-[#212529]","aria-hidden":"true"})]})}),(0,i.jsx)(J.u,{as:o.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:n})]})})}var et=t(41664),ei=t.n(et),er=t(51649),eo=t(8193),es=t(5434),el=o.memo(function(e){let{StoreTag:n}=e,{onConfirmSave:t,posts:r,loading:s}=G(),l=(0,c.v9)(e=>e.book.body),a=(0,c.v9)(e=>e.book.postId),d=(0,c.v9)(e=>e.book.title),u=(0,c.v9)(e=>e.book.book),[p,h]=(0,o.useState)(!1),x=(0,c.I0)(),b=async()=>{t(a,d,l,n,u)},f=()=>{x((0,m.TI)()),h(!0)},v=()=>{h(!1)};return(0,i.jsxs)("div",{className:"flex mt-3 mr-3 mxs:mr-1",children:[(0,i.jsx)("div",{className:"md:hidden text-sm px-[20px] py-[10px] mxs:px-[10px]  rounded-3xl bg-[#FCD535] text-[#181A20] hover:text-[#545b6d] cursor-pointer mr-1",style:{zIndex:2},children:(0,i.jsx)(en,{children:(0,i.jsxs)(K.v.Items,{className:"absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none",children:[(0,i.jsxs)("div",{className:"px-1 py-1",children:[(0,i.jsx)(K.v.Item,{children:e=>{let{active:n}=e;return(0,i.jsx)(ei(),{href:"/",children:(0,i.jsxs)("button",{className:"".concat(n?"bg-[#FCD535] text-gray-900":"text-gray-900"," group flex w-full items-center rounded-md px-2 py-2 text-sm"),children:[(0,i.jsx)(er.UkU,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),"뒤로가기"]})})}}),(0,i.jsx)(K.v.Item,{children:e=>{let{active:n}=e;return(0,i.jsx)("div",{onMouseOver:()=>f(),onMouseOut:()=>v(),onTouchStart:f,onTouchEnd:v,onClick:b,children:(0,i.jsxs)("button",{className:"".concat(n?"bg-[#FCD535] text-gray-900":"text-gray-900"," group flex w-full items-center rounded-md px-2 py-2 text-sm"),children:[(0,i.jsx)(eo.JMf,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),"포스트 저장"]})})}})]}),(0,i.jsx)("div",{className:"px-1 py-1",children:(0,i.jsx)(K.v.Item,{children:e=>{let{active:n}=e;return(0,i.jsx)("div",{onClick:()=>x((0,m.aQ)()),children:(0,i.jsxs)("button",{className:"".concat(n?"bg-[#FCD535] text-gray-900":"text-gray-900"," group flex w-full items-center rounded-md px-2 py-2 text-sm"),children:[(0,i.jsx)(es.vB0,{className:"mr-2 h-5 w-5","aria-hidden":"true"}),"완료"]})})}})})]})})}),(0,i.jsxs)("div",{className:"mmd:hidden flex",children:[(0,i.jsx)("div",{onMouseOver:()=>f(),onMouseOut:()=>v(),onTouchStart:f,onTouchEnd:v,onClick:b,className:"font-Roboto text-sm px-[20px] py-[10px] rounded-3xl bg-[#FCD535] text-[#181A20] hover:text-[#545b6d] mr-4 cursor-pointer ssm:mr-1 tracking-wider",children:"saved"}),(0,i.jsx)("div",{onClick:()=>x((0,m.aQ)()),className:"font-Roboto text-sm px-[20px] py-[10px] rounded-3xl bg-[#FCD535] text-[#181A20] hover:text-[#545b6d] cursor-pointer mr-1 tracking-wider",children:"publish"})]})]})}),ea=t(71284),ec=t(9384),ed=t(42752),eu=t(18151),em=t(41705),ep=t(8045),eh=t(50601),ex=t(90214),eb=t(48510),ef=t(20336),ev=t(99734),eg=t(26022),ek=t(30561),ey=t(34565),ej=t(51575),ew=t(73397),eC=t(52701),eZ=t(57355),eN=t(7070),e_=t(99404),eS=t(96279),eP=t(51358),eF=t(23621),e$=t(2376),eI=t(84348);function ez(e){let n=/(#[0-9a-f]{3,6})\b/gi,t=[];return e.descendants((e,i)=>{e.text&&Array.from(e.text.matchAll(n)).forEach(e=>{let n=e[0],r=e.index||0,o=i+r,s=o+n.length,l=eI.p.inline(o,s,{class:"color",style:"--color: ".concat(n)});t.push(l)})}),eI.EH.create(e,t)}let eA=ed.hj.create({name:"colorHighlighter",addProseMirrorPlugins:()=>[new e$.Sy({state:{init(e,n){let{doc:t}=n;return ez(t)},apply:(e,n)=>e.docChanged?ez(e.doc):n},props:{decorations(e){return this.getState(e)}}})]});var eT=t(90353);let eM=e=>{let{editor:n}=e,[t,r]=(0,o.useState)([]),s=(0,o.useCallback)(()=>{let e=[],t=n.state.tr;n.state.doc.descendants((n,i)=>{if("heading"===n.type.name){let r="heading-".concat(e.length+1);n.attrs.id!==r&&t.setNodeMarkup(i,void 0,{...n.attrs,id:r}),e.push({level:n.attrs.level,text:n.textContent,id:r})}}),t.setMeta("addToHistory",!1),t.setMeta("preventUpdate",!0),n.view.dispatch(t),r(e)},[n]);return(0,o.useEffect)(s,[]),(0,o.useEffect)(()=>n?(n.on("update",s),()=>{n.off("update",s)}):null,[n]),(0,i.jsx)(ea.T5,{className:"toc",children:(0,i.jsx)("ul",{className:"toc__list",children:t.map((e,n)=>(0,i.jsx)("li",{className:"toc__item toc__item--".concat(e.level),children:(0,i.jsx)("a",{href:"#".concat(e.id),children:e.text})},n))})})};var eU=ed.NB.create({name:"tableOfContents",group:"block",atom:!0,parseHTML:()=>[{tag:"toc"}],renderHTML(e){let{HTMLAttributes:n}=e;return["toc",(0,ed.P1)(n)]},addNodeView:()=>(0,ea.fW)(eM),addGlobalAttributes:()=>[{types:["heading"],attributes:{id:{default:null}}}]}),eL=t(7490),eH=t(26761),eR=t(43800),eE=t(35378),eD=t(44993),eB=t(96214),eO=t(61193),eW=t(68614),eq=t(96880),eQ=t(62630),eY=t(93831),eV=t(86871),eX=t(53586),eG=t(85938),eK=t(26426),eJ=t(90629),e0=t(98131),e1=t(21519),e2=t(33454),e5=t(29077);let e4=(0,e5.ZP)(e2.Z)(e=>{let{theme:n}=e;return{"& .MuiToggleButtonGroup-grouped":{margin:n.spacing(.5),border:0,"&.Mui-disabled":{border:0},"&:not(:first-of-type)":{borderRadius:n.shape.borderRadius},"&:first-of-type":{borderRadius:n.shape.borderRadius}}}});var e8=t(78862);function e3(e){let{editor:n,isdark:t}=e;return(0,i.jsxs)(e4,{size:"small",exclusive:!0,"aria-label":"text alignment",children:[(0,i.jsx)(e0.Z,{value:"h1",className:"text-white","aria-label":"H1 Text",onClick:()=>n.chain().focus().toggleHeading({level:1}).run(),selected:n.isActive("heading",{level:1}),children:(0,i.jsx)(e8.Z,{fontWeight:900,color:"".concat("dark"==t?"primary":"secondary"),children:"H1"})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleHeading({level:2}).run(),selected:n.isActive("heading",{level:2}),value:"h2","aria-label":"H2 Text",children:(0,i.jsx)(e8.Z,{fontWeight:800,color:"".concat("dark"==t?"primary":"secondary"),children:"H2"})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleHeading({level:3}).run(),selected:n.isActive("heading",{level:3}),value:"h3","aria-label":"H3 Text",children:(0,i.jsx)(e8.Z,{fontWeight:800,color:"".concat("dark"==t?"primary":"secondary"),children:"H3"})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleHeading({level:4}).run(),selected:n.isActive("heading",{level:4}),value:"h4","aria-label":"H4 Text",children:(0,i.jsx)(e8.Z,{fontWeight:700,color:"".concat("dark"==t?"primary":"secondary"),children:"H4"})})]})}(0,e5.ZP)(e0.Z)({"&.Mui-selected, &.Mui-selected:hover":{color:"white",backgroundColor:"#00ff00"}});var e6=t(34282),e9=t(21587),e7=t(64871);function ne(){let e=(0,y.Z)([""]);return ne=function(){return e},e}let nn=e=>{let{editor:n,children:t,isdark:r}=e;if(!n)return null;let o=()=>{let e=prompt("Enter YouTube URL");if(e){var t;null==n||null===(t=n.commands)||void 0===t||t.setYoutubeVideo({src:e})}};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(eJ.Z,{className:"flex flex-wrap w-full mxl:overflow-x-scroll items-center",sx:{display:"flex",alignItems:"center",border:e=>"1px solid ".concat(e.palette.divider),flexWrap:"wrap",position:"sticky",top:0,zIndex:1,background:"dark"==r?"#2b2d31":"#fff"},children:[(0,i.jsxs)(e4,{size:"small",exclusive:!0,"aria-label":"vertical outlined primary button group",children:[(0,i.jsx)(e3,{editor:n,isdark:r}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleBold().run(),selected:n.isActive("bold"),value:"bold","aria-label":"bold",children:(0,i.jsx)(eO.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleItalic().run(),value:"italic","aria-label":"italic",selected:n.isActive("italic"),children:(0,i.jsx)(eW.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleStrike().run(),value:"strike","aria-label":"strike",selected:n.isActive("strike"),children:(0,i.jsx)(eQ.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleCode().run(),value:"code","aria-label":"code",selected:n.isActive("code"),children:(0,i.jsx)(eB.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleBlockquote().run(),value:"blockQuote","aria-label":"blockQuote",selected:n.isActive("blockQuote"),children:(0,i.jsx)(eX.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().setHorizontalRule().run(),selected:n.isActive("HorizontalRule"),value:"HorizontalRule","aria-label":"HorizontalRule",children:(0,i.jsx)(eV.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().setParagraph().run(),selected:n.isActive("paragraph"),value:"paragraph","aria-label":"paragraph",children:(0,i.jsx)(eq.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleUnderline().run(),selected:n.isActive("underline"),value:"underline","aria-label":"underline",children:(0,i.jsx)(eY.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)("div",{className:"border-2 flex items-center px-[1px]",children:t}),(0,i.jsx)(e0.Z,{onClick:()=>{let e=n.getAttributes("link").href,t=window.prompt("URL",e);if(null!==t){if(""===t){n.chain().focus().extendMarkRange("link").unsetLink().run();return}n.chain().focus().extendMarkRange("link").setLink({href:t}).run()}},selected:n.isActive("link"),value:"link","aria-label":"link",children:(0,i.jsx)(eR.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{value:"youtube","aria-label":"youtube",onClick:o,children:(0,i.jsx)(e7.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleBulletList().run(),value:"bullettList","aria-label":"bullettList",selected:n.isActive("bulletList"),children:(0,i.jsx)(eG.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().toggleOrderedList().run(),value:"orderedList","aria-label":"orderedList",selected:n.isActive("orderedList"),children:(0,i.jsx)(eK.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e1.Z,{flexItem:!0,orientation:"vertical",sx:{mx:.5,my:1}}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().undo().run(),value:"undo","aria-label":"undo",children:(0,i.jsx)(eE.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().redo().run(),value:"redo","aria-label":"redo",children:(0,i.jsx)(eD.Z,{color:"".concat("dark"==r?"primary":"secondary")})}),(0,i.jsx)("div",{className:"ml-2 mr-1 flex items-center",children:(0,i.jsx)(nt,{type:"color",ad:!0,className:"border-none bg-none",onInput:e=>n.chain().focus().setColor(e.target.value).run(),value:n.getAttributes("textStyle").color})})]}),(0,i.jsx)(W.Z,{content:"색깔을 초기화 시킵니다",position:e9.Z.TOP,children:(0,i.jsx)(e0.Z,{onClick:()=>n.chain().focus().unsetColor().run(),value:"unset color","aria-label":"unset color",children:(0,i.jsx)(e6.Z,{color:"".concat("dark"==r?"primary":"secondary")})})})]})})},nt=w.ZP.input(ne());var ni=t(25748);function nr(){let e=(0,y.Z)(["\n  font-size: 1rem;\n  font-weight: bold;\n  color: rgb(134, 142, 150);\n  cursor: pointer;\n"]);return nr=function(){return e},e}class no extends o.PureComponent{componentDidMount(){document.addEventListener("click",this.closePopover)}componentWillUnmount(){document.removeEventListener("click",this.closePopover)}handleChange(e){return n=>{this.setState({[e]:n.currentTarget.value})}}onProgress(e,n){let t=n?"webWorker":"mainThread";this.setState(n=>({...n,[t]:{...n[t],progress:e}}))}async compressImage(e,n){let t=e.target.files[0];console.log("ExifOrientation",await j.Z.getExifOrientation(t));let i=n?"webWorker":"mainThread";this.setState(e=>({...e,[i]:{...e[i],inputSize:(t.size/1024/1024).toFixed(2),inputUrl:URL.createObjectURL(t)}}));let r=await (0,j.Z)(t,{maxSizeMB:1,maxWidthOrHeight:1024,useWebWorker:n,onProgress:e=>this.onProgress(e,n)}),o=new FileReader;o.readAsDataURL(r),o.onloadend=()=>{let{addImage:e}=this.props;e(o.result)},this.setState(e=>({...e,[i]:{...e[i],outputSize:(r.size/1024/1024).toFixed(2),outputUrl:URL.createObjectURL(r)}}))}render(){let{webWorker:e}=this.state;return(0,i.jsx)("div",{className:"cursor-pointer",children:(0,i.jsx)(ns,{children:1==this.props.previewSource?(0,i.jsx)(C.Z,{size:18}):(0,i.jsxs)("div",{className:"flex cursor-pointer",children:[(0,i.jsx)("label",{htmlFor:"fileInput",children:(0,i.jsx)("svg",{className:"cursor-pointer",stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 24 24",height:"1.5rem",width:"1.5rem",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"})})}),(0,i.jsx)("input",{id:"fileInput",name:"image",type:"file",accept:"image/*",style:{display:"none"},className:"p-1.5 cursor-pointer hover:bg-neutral-100 transition-all",onChange:e=>this.compressImage(e,!0)})]})})})}constructor(e){super(e),this.onPopoverClick=()=>{this.preventNextClose=!0},this.openPopover=()=>{this.state.open||(this.preventNextClose=!0,this.setState({open:!0}))},this.closePopover=()=>{!this.preventNextClose&&this.state.open&&this.setState({open:!1}),this.preventNextClose=!1},this.compressImage=this.compressImage.bind(this),this.handleChange=this.handleChange.bind(this),this.state={open:!1,maxSizeMB:1,maxWidthOrHeight:1024,webWorker:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null},mainThread:{progress:null,inputSize:null,outputSize:null,inputUrl:null,outputUrl:null}}}}let ns=w.ZP.div(nr());var nl=t(27280);function na(){let e=(0,y.Z)(["\n  iframe {\n    border-radius: 4px;\n    min-width: 280px;\n    min-height: 280px;\n\n    display: block;\n    outline: 0px solid transparent;\n  }\n\n  div[data-youtube-video] > iframe {\n    cursor: move;\n    aspect-ratio: 16 / 9;\n    width: 100%;\n  }\n\n  .ProseMirror-selectednode iframe {\n    transition: outline 0.15s;\n  }\n\n  @media only screen and (max-width: 480px) {\n    div[data-youtube-video] > iframe {\n      max-height: 50px;\n    }\n  }\n\n  @media only screen and (max-width: 720px) {\n    div[data-youtube-video] > iframe {\n      max-height: 100px;\n    }\n  }\n\n  .ProseMirror {\n    > * + * {\n    }\n\n    img {\n      height: 100%;\n      max-width: 100%;\n      object-fit: cover;\n\n      &.ProseMirror-selectednode {\n        outline: 3px solid #68cef8;\n      }\n    }\n\n    h1 {\n      font-size: 2.5rem;\n      line-height: 1.5;\n      font-weight: 700;\n      margin-bottom: 1rem;\n      margin-top: 2.5rem;\n      letter-spacing: -0.004em;\n      color: ",";\n\n      "," {\n        font-size: 2rem;\n      }\n    }\n\n    h2 {\n      font-size: 2rem;\n      line-height: 1.5;\n      margin-bottom: 1rem;\n      margin-top: 2.5rem;\n      letter-spacing: -0.004em;\n      color: ",";\n      "," {\n        font-size: 1.5rem;\n      }\n    }\n    h3 {\n      font-size: 1.5rem;\n      line-height: 1.5;\n      margin-bottom: 1rem;\n      margin-top: 1.5rem;\n      letter-spacing: -0.004em;\n      color: ",";\n      "," {\n        font-size: 1.15rem;\n      }\n    }\n    h4 {\n      font-size: 1.3125rem;\n      line-height: 1.5;\n      margin-bottom: 1rem;\n      letter-spacing: -0.004em;\n      margin-top: 1.5rem;\n      color: ",";\n      "," {\n        font-size: 1rem;\n      }\n    }\n\n    min-height: 100%;\n    max-height: 100%;\n    width: 100%;\n\n    ol {\n      list-style-type: decimal;\n      position: relative;\n      color: #ffb300;\n      font-weight: 600;\n      padding-left: 20px;\n      font-size: 1.125rem;\n      margin: 18px 0;\n\n      li {\n        line-height: 1.5;\n        vertical-align: middle;\n      }\n\n      li p {\n        vertical-align: middle;\n        padding-bottom: 5px;\n      }\n    }\n\n    ul {\n      list-style-type: disc;\n      position: relative;\n      color: #ffb300;\n      margin: 18px 0;\n      padding-left: 20px;\n      font-size: 1.125rem;\n\n      vertical-align: middle;\n\n      li {\n        line-height: 1.5;\n        vertical-align: middle;\n      }\n\n      li p {\n        vertical-align: middle;\n        padding-bottom: 5px;\n      }\n    }\n\n    code {\n      background-color: #ffe066;\n      color: #212529;\n      padding: 0.2em 0.4em;\n      border-radius: 3px;\n      font-size: 90%;\n    }\n\n    div {\n      .toc {\n        margin-bottom: 1.5rem;\n        white-space: initial;\n        word-wrap: break-word;\n        list-style: none;\n        overflow: hidden;\n\n        .toc__list {\n          list-style: none;\n          margin-left: 0;\n          margin-right: 0;\n          color: ",";\n          padding: 0;\n          margin: 0;\n        }\n        ul {\n          list-style: none;\n        }\n        li:before {\n          content: '';\n          margin-left: 0;\n          margin-right: 0;\n          list-style: none;\n        }\n      }\n      color: ",";\n      background: ",";\n\n      .toc__list::before {\n        color: ",";\n      }\n    }\n\n    pre {\n      background: #0d0d0d;\n      color: #fff;\n      font-family: 'JetBrainsMono', monospace;\n      padding: 0.75rem 1rem;\n      border-radius: 0.5rem;\n\n      code {\n        color: inherit;\n        padding: 0;\n        background: none;\n        font-size: 0.8rem;\n      }\n    }\n\n    .quote {\n      margin: 0 auto;\n      position: relative;\n      padding-left: 55px;\n      margin: 75px 0;\n      "," {\n        margin: 25px 0;\n      }\n      &:before {\n        color: #fcd545;\n        font-size: 100px;\n        font-family: 'Comic Sans MS', 'Comic Sans', cursive;\n        line-height: 0.9;\n        content: open-quote;\n        vertical-align: top;\n\n        position: absolute;\n        left: -5px;\n      }\n\n      &:after {\n        visibility: hidden;\n        content: close-quote;\n      }\n    }\n\n    hr {\n      border-top: 2px solid rgba(#0d0d0d, 0.1);\n      margin: 1.5rem 0;\n    }\n  }\n\n  p {\n    font-size: 1.125rem;\n    line-height: 1.7;\n    letter-spacing: -0.004em;\n    color: ",";\n    display: block;\n\n    font-family: 'Noto Sans KR', 'Nanum Gothic', 'Roboto', 'Helvetica Neue', Arial,\n      sans-serif;\n    font-weight: 400;\n    line-height: 1.7;\n\n    word-break: break-all;\n  }\n\n  u {\n    text-decoration: none;\n\n    background: linear-gradient(to right, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0)),\n      linear-gradient(to right, #e9756b, #e9756b, #e9756b);\n    background-size: 100% 0.1em, 30% 0.1em;\n    background-position: 100% 100%, 0 100%;\n\n    background-repeat: no-repeat;\n    transition: background-size 600ms;\n\n    &:hover {\n      background-size: 100% 0.1em, 100% 0.1em;\n    }\n  }\n"]);return na=function(){return e},e}let nc={1:"text-4xl",2:"text-3xl",3:"text-2xl"};var nd=function(e){let{postId:n,posts:t}=e,r=(0,c.I0)(),s=(0,c.v9)(e=>e.core.isdark),l=(0,c.v9)(e=>e.book.body),a=(0,c.v9)(e=>e.book.isopen),[d,u]=(0,o.useState)(0),[p,h]=(0,o.useState)(""),[b]=(0,x.useMutation)(f.KH),[g,k]=(0,o.useState)(!1),y=(0,o.useCallback)(()=>{k(!0)},[g]),j=null==t?void 0:t.filter(e=>e.id==n),w=(0,ea.jE)({editorProps:{attributes:{class:"focus:outline-none"}},extensions:[ec.Z,eu.Z,ew.Z,em.Z,eH.ZP,eh.ZP,ex.ZP,ef.Z,eC.Z,eZ.ZP,ej.ZP,ey.Z,eF.Z,eN.Z,e_.Z,ep.Z.configure({controls:!0,width:813,height:480,allowFullscreen:!0}),ek.ZP.configure({HTMLAttributes:{class:"connected-line"}}),ni.Z.configure({HTMLAttributes:{class:"hor"}}),ev.ZP.configure({HTMLAttributes:{class:"quote"}}),eb.Z.configure({HTMLAttributes:{class:"underlinetag"}}),eH.ZP.configure({allowBase64:!0}),eg.Z.configure({HTMLAttributes:{class:"ptag"}}),eL.Z.configure({levels:[1,2,3]}).extend({renderHTML(e){let{node:n,HTMLAttributes:t}=e,i=this.options.levels.includes(n.attrs.level),r=i?n.attrs.level:this.options.levels[0];return["h".concat(r),(0,ed.P1)(this.options.HTMLAttributes,t,{class:"".concat(nc[r]," leading-normal")}),0]}}),eS.Z.configure({types:["heading","paragraph"]}),eP.Z.configure({className:"has-focus",mode:"all"}),eA,eT.I.configure({types:["textStyle"]}),eU],autofocus:!0,content:(null==l?void 0:l.length)>100?l:"<div><toc></toc> \n    </div>반갑습니다\n \n  "}),C=(0,o.useCallback)(async e=>{u(1),await b({variables:{body:e,width:813,height:477},update:(e,n)=>{let{data:t}=n;h(t.uploadImage.url),w.chain().focus().setImage({src:t.uploadImage.url}).run(),u(2)}})},[w]),Z=null==w?void 0:w.getHTML();return((0,o.useEffect)(()=>{(null==Z?void 0:Z.length)<3e4?r((0,m.aq)(Z)):!g&&(null==Z?void 0:Z.length)>3e4?(y(),v.Am.warning("너무 길기 때문에 지금 부터는 자동저장이 되지 않습니다",{position:"bottom-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})):a&&r((0,m.aq)(Z))},[Z,y,a]),(0,o.useEffect)(()=>{if((null==j?void 0:j.length)!=0&&j){var e,n;let t=null===(e=j[0])||void 0===e?void 0:e.body.replace("<toc></toc>","");r((0,m.vz)(null===(n=j[0])||void 0===n?void 0:n.title)),w.commands.setContent(t)}},[n]),w)?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(nn,{editor:w,isdark:s,children:(0,i.jsx)(no,{addImage:C,previewSource:d})}),(0,i.jsx)(nu,{className:"w-full mt-2 overflow-y-scroll scrollbar scrollbar-thumb-gray-900 scrollbar-track-gray-100 scrollbar-w-2 px-[1rem]",isdark:s,children:(0,i.jsx)(ea.kg,{editor:w,className:"",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false"})})]}):null};let nu=w.ZP.div(na(),e=>"dark"==e.isdark?"#CFCFCF":"#212529",nl.ZP.custom(768),e=>"dark"==e.isdark?"#CFCFCF":"#212529",nl.ZP.custom(768),e=>"dark"==e.isdark?"#CFCFCF":"#212529",nl.ZP.custom(768),e=>"dark"==e.isdark?"#CFCFCF":"#212529",nl.ZP.custom(768),e=>"dark"==e.isdark?"white":"#212529",e=>"dark"==e.isdark?"#CFCFCF":"#212529",e=>"dark"==e.isdark?"#212529":"",e=>"dark"==e.isdark?"#CFCFCF":"#212529",nl.ZP.custom(768),e=>"dark"==e.isdark?"#CFCFCF":"#333");var nm=t(60155),np=function(e){let{className:n}=e,{isdark:t}=(0,c.v9)(e=>e.core);return(0,i.jsx)("svg",{className:n,fill:"none",viewBox:"0 0 18 18",children:(0,i.jsx)("path",{d:"M10.5 1.875V4.2c0 .63 0 .945.123 1.186.107.211.28.384.491.491C11.354 6 11.67 6 12.3 6h2.325M6.75 9h4.5m-4.5 3h3M15 6.244V12.9c0 1.26 0 1.89-.245 2.371-.216.424-.56.768-.984.984-.48.245-1.11.245-2.371.245H6.6c-1.26 0-1.89 0-2.371-.245a2.25 2.25 0 0 1-.984-.983C3 14.79 3 14.16 3 12.9V5.1c0-1.26 0-1.89.245-2.371a2.25 2.25 0 0 1 .984-.984C4.709 1.5 5.339 1.5 6.6 1.5h3.656c.367 0 .55 0 .723.041.153.037.3.098.433.18.152.093.281.223.54.482l2.345 2.344c.26.26.39.39.482.54.082.135.143.281.18.434.041.173.041.356.041.723Z",stroke:"dark"==t?"#CFCFCF":"#64748b",width:"24px",height:"24px","stroke-width":"1.25","stroke-linecap":"round","stroke-linejoin":"round"})})},nh=t(47836),nx=t(36811),nb=t(56471);function nf(){let e=(0,y.Z)(["\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n"]);return nf=function(){return e},e}var nv=function(e){let{post:n,onConfirmRemove:t}=e,[r,s]=(0,o.useState)(!1),[l,a]=(0,o.useState)(!0),d=(0,c.I0)();return n.id,(0,i.jsxs)("div",{className:"flex justify-between hover:bg-[#e2e8f0] py-[6px] transition-all dark:hover:bg-[#54565f33]",children:[(0,i.jsxs)("div",{className:"flex items-center",onClick:()=>d((0,m.n8)(n.id)),children:[(0,i.jsx)("div",{children:(0,i.jsx)(np,{className:"w-6 cursor-pointer"})}),(0,i.jsx)("div",{className:"ml-1",children:(0,i.jsx)(ng,{className:"text-[#64748b] text-sm cursor-pointer dark:text-[#CFCFCF]",children:n.title})})]}),(0,i.jsx)("section",{children:(0,i.jsx)(nh.Z,{content:e=>{let{close:r}=e;return(0,i.jsxs)(nx.Z,{width:300,height:200,className:"flex flex-col justify-center items-center",children:[(0,i.jsx)("div",{className:"text-center font-bold text-lg ",children:"삭제"}),(0,i.jsx)("div",{className:"text-center mt-2 text-[#495057] text-sm ",children:"정말 삭제 하시겠습니까?"}),(0,i.jsx)("div",{className:"text-center mt-2 text-[#495057] text-sm",children:"삭제한 글은 복구할 수 없습니다."}),(0,i.jsxs)("div",{className:"flex justify-between w-[50%] mx-auto mt-4",children:[(0,i.jsx)(nb.ZP,{onClick:r,children:"Close"}),(0,i.jsx)(nb.ZP,{className:"text-red-500 shadow-2xl",color:"red",onClick:()=>{t(n.id),d((0,m.n8)(null))},children:"삭제"})]})]})},children:(0,i.jsx)("button",{className:"text-[#64748b] text-sm dark:text-[#CFCFCF]",children:"삭제"})})})]})};let ng=w.ZP.div(nf());var nk=t(56180),ny=function(e){let{value:n}=e,{posts:t,loading:r,onConfirmRemove:s}=G(),[l,a]=(0,o.useState)(!0),c=n?null==t?void 0:t.filter(e=>{var t;return null==e?void 0:null===(t=e.title)||void 0===t?void 0:t.includes(n)}):t;return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:"text-[#64748b] text-base font-bold flex items-center justify-between px-4",onClick:()=>a(!l),children:[(0,i.jsxs)("div",{className:"dark:text-[#D3D3D3]",children:[" 임시 저장 글 (",null==c?void 0:c.length,")"]}),(0,i.jsx)("div",{children:l?(0,i.jsx)(es.Yc6,{size:20}):(0,i.jsx)(es.G1X,{size:20})})]}),(0,i.jsx)(nk.Collapse,{isOpened:l,children:(0,i.jsx)("div",{className:"text-[#64748b] text-base font-bold px-4 mt-3",children:null==c?void 0:c.map(e=>(0,i.jsx)(nv,{post:e,onConfirmRemove:s},e.id))})})]})};function nj(){let e=(0,y.Z)(["\n  overflow-y: scroll;\n  overflow-x: hidden;\n\n  ::-webkit-scrollbar-track {\n    margin-top: 10px;\n    margin-bottom: 10px;\n    border-radius: 20px;\n  }\n  ::-webkit-scrollbar-thumb {\n    border-radius: 20px;\n  }\n  .nextui-c-lfcDHB {\n    padding: 0 0.5rem;\n    padding-top: 0.5rem;\n    padding-bottom: 0.5rem;\n  }\n"]);return nj=function(){return e},e}var nw=o.memo(function(e){let{}=e,[n,t]=(0,o.useState)(""),[r]=(0,X.Nr)(n,300);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"py-4 mx-2",children:(0,i.jsxs)("div",{className:"relative mr-2",children:[(0,i.jsx)("div",{className:"absolute top-[50%] left-[16px] translate-y-[-50%] bg-[rgb(255 115 179)]",children:(0,i.jsx)(nm.uFR,{className:"dark:text-[#D3D3D3]"})}),(0,i.jsx)("input",{placeholder:"임시 포스트를 검색해보세요",name:"BookSearch",width:"240px",className:"text-xs border-[#d8dae5] text-[#474d66] w-full rounded-full h-[40px] border-[1px] py-[0.5rem] px-[2.5rem] focus:outline-none dark:bg-[#2b3139] dark:border-[#1a1b1e] dark:text-[#e4e5e7]",height:40,onChange:e=>{t(e.target.value)},value:n,style:{borderRadius:"1.5rem",fontSize:"12px"}})]})}),(0,i.jsx)(nC,{className:"sticky top-0 h-[calc(100vh-9.375rem)] min-h-[0] scrollbar scrollbar-thumb-gray-400 scrollbar-track-gray-100 scrollbar-w-1",children:(0,i.jsx)(ny,{value:r})})]})});let nC=w.ZP.div(nj());var nZ=o.memo(function(e){let{}=e,n=(0,c.v9)(e=>e.book.title),t=(0,c.I0)(),r=(0,o.useCallback)(e=>{let{value:n}=e.target;t((0,m.vz)(n))},[t]);return(0,i.jsx)("div",{className:"flex justify-between items-center px-[1rem] w-full mxs:px-2",children:(0,i.jsxs)("div",{className:"text-4xl font-bold focus:outline-none w-full mmd:text-[2rem] pt-[1.5rem] mxs:text-2xl",children:[(0,i.jsx)("input",{name:"title",placeholder:"제목을 입력하세요",className:"w-full dark:bg-[#1a1b1e] focus:outline-none dark:placeholder-[#D3D3D3] dark:text-[#ececec]",value:n,onChange:r}),(0,i.jsx)("hr",{className:"border-2 w-6/12 mt-3.5 h-1 dark:border-[#D3D3D3] mmd:mt-2 mxs:mt-1"})]})})}),nN=o.memo(function(e){let{}=e,n=(0,c.v9)(e=>e.book.tags),t=(0,c.v9)(e=>e.book.postId),{posts:r}=G();return(0,i.jsxs)(F.k,{as:"main",className:"mxl:max-w-[80rem]",children:[(0,i.jsxs)(u.$t,{className:"col-span-2 sticky top-0 h-[100vh] min-h-[0] overflow-hidden border-r mmd:hidden",children:[(0,i.jsx)("div",{className:"flex px-4 py-4 border-b items-center justify-center h-[4.6875rem]",children:(0,i.jsx)("div",{className:"flex item py-2 px-4",children:(0,i.jsx)(P.hb,{href:"/",children:(0,i.jsx)("div",{className:"font-Fredoka w-[240px] mxl:w-[200px] text-[#334155] text-lg flex items-center justify-between pl-3 dark:text-[#D3D3D3]",children:"BookReview"})})})}),(0,i.jsx)(nw,{})]}),(0,i.jsx)(u.LN,{className:"col-span-8 mmd:col-span-10",first:(0,i.jsxs)(u.s2,{children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsx)(nZ,{}),(0,i.jsx)(el,{StoreTag:n})]}),(0,i.jsx)("div",{className:"px-4 py-4 mxs:px-2",children:(0,i.jsx)(V,{StoreTag:n,postId:t,posts:r})})]}),second:(0,i.jsx)(u.so,{children:(0,i.jsx)(nd,{postId:t,posts:r})})})]})}),n_=t(12045),nS=function(e){let{}=e;return(0,i.jsxs)("div",{className:"",children:[(0,i.jsx)(r.PB,{...(0,n_.q)({title:"책 리뷰 작성",description:"책 리뷰 작성 페이지"})}),(0,i.jsx)(nN,{}),(0,i.jsx)(S,{})]})}}},function(e){e.O(0,[228,260,617,866,911,556,78,221,303,424,774,888,179],function(){return e(e.s=5776)}),_N_E=e.O()}]);